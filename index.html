<!DOCTYPE html>
<html lang="en">
	<head>
		<title>OrbitusBiomedical</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		
		<link href="css/bootstrap.css" rel="stylesheet">
    	<link href="css/bootstrap-responsive.css" rel="stylesheet">

		<style>

			h4 {
				font-size:90px;
			}

			body {
				background-color: #FFFFFF;
				margin: 0px;
				overflow: hidden;
				font-family:Monospace;
				font-size:13px;
				text-align:center;
				font-weight: bold;
				text-align:center;

			}
			
			#info {
				position: absolute;
				top: 0px;
				left:0px;
				width: 20%;
				color: #ffffff;
				padding: 5px;
				font-family: Monospace;
				font-size: 13px;
				font-weight: bold;
				text-align: left;
				z-index: 1;
			}

			
			a {
				color:#0078ff;
			}

			#info {
				color:#fff;
				position: absolute;
				top: 0px;
				width: 100px;
				padding: 5px;
				z-index:100;
			}

			#bugReport_Container
			{
				color:#FFFFFF;
				position:absolute;
				left:30px;
				bottom:20px;
				width:40px;
				border: 2px solid #a1a1a1;
			    border-radius: 25px;
			    background: #303080;

			}
			
			#bugReport_Button {
				position:relative;
				top:25%;
				width:40px;
				height:40px;
				
				-moz-border-radius: 2px; 
				-webkit-border-radius: 2px; 
				background: url(BugReport.png) no-repeat center; 
				line-height : 30px;
				font-size: 40px;
				z-index: 1001;
			}


			#outputcontent {
				color: #ffffff;

			}

			#message {
				color: #ffffff;
			}

			
			* {
				margin:0;
				padding:0;
				box-sizing:border-box;
				-webkit-box-sizing:border-box;
				-moz-box-sizing:border-box;
				-webkit-font-smoothing:antialiased;
				-moz-font-smoothing:antialiased;
				-o-font-smoothing:antialiased;
				font-smoothing:antialiased;
				text-rendering:optimizeLegibility;
			}
			
			body {
				font:400 12px/1.625 "Helvetica Neue", Helvetica, Arial, sans-serif;
			}

			#float_background
			{
				background-color:#000000;
				opacity:0.5;

				position:fixed;
			    top:-30px;
			    right:400px;
			    float:right;
			}
			

			#float{
			    position:fixed;
			    top:-30px;
			    right:400px;
			    float:right;
			}
			
			.wrapper {
				max-width:400px;
				min-width:400px;
				position:absolute;
				width:95%;
				background: url() no-repeat #FFFFFF center; 

			}
			#white_background {
				position:absolute;
				top:0px;
				left:0px;
				width:100%;
				height:100%;
				background: url() no-repeat #FFFFFF center; 
			}


			#ContactPage{
				
				top:20%;
				width: 400px;
    			margin: 0 auto;
    			z-index:1000;
				-webkit-transition: opacity 0.5s ease-in;
	            -moz-transition: opacity 0.5s ease-in;
	            -o-transition: opacity 0.5s ease-in;

			}


			.hidden-display
			{
				visibility: hidden;
				opacity:0;
			}
			.visible-display
			{
				visibility: visible;
				opacity: 1;
			}

	        #ContactPage.fade-out
	        {
	        	visibility:hidden;
	            opacity:0;
	        }

	        #ContactPage.fade-in
	        {
	        	visibility:visible;
	            opacity:1;
	        }

			#ContactButton{
				position:absolute;
				right:50px;
				top:50px;
				width:100px;
				height:50px;
				background: url('images/Contact.png') 300 100 no-repeat;
				z-index:100;
				border-radius:25px;
			}


			#ContactButtonImg{
				position:absolute;
				left:0px;
				top:0px;
				width:100px;
				height:50px;
				z-index:100;
				border-radius:25px;

			}

			#contact-form input[type="text"],
			#contact-form input[type="email"],
			#contact-form input[type="tel"],
			#contact-form input[type="url"],
			#contact-form textarea,
			#contact-form button[type="submit"] {
				font:400 12px/12px "Helvetica Neue", Helvetica, Arial, sans-serif;
			}
			#contact-form {

				text-shadow:0 1px 0 #FFF;
				border-radius:4px;
				-webkit-border-radius:4px;
				-moz-border-radius:4px;
				background:#F7F7F7;
				text-align: left;
				padding:25px;

				border: 4px solid #A0A9AD; 
				-moz-border-radius: 4px; 
				-webkit-border-radius: 4px; 
			}
			#MoleculeName{
				color:#FF5050;
				display:block;
				font-size:26px;
				word-wrap: break-word;
			}
			#contact-form h3 {
				color:#FF5050;
				display:block;
				font-size:22px;
				word-wrap: break-word;
			}
			#contact-form h4 {
				margin:5px 0 15px;
				display:block;
				font-size:13px;
			}
			#contact-form h5 {
				margin:5px 0 15px;
				display:block;
				font-size:48px;
			}
			#contact-form h6 {
				margin:5px 0 15px;
				display:block;
				font-size:20px;
			}
			#contact-form label span {
				cursor:pointer;
				color:#606060;
				display:block;
				margin:5px 0;
				font-weight:900;
			}
			#contact-form input[type="text"],
			#contact-form input[type="email"],
			#contact-form input[type="tel"],
			#contact-form input[type="url"],
			#contact-form textarea {
				width:100%;
				box-shadow:inset 0 1px 2px #DDD, 0 1px 0 #FFF;
				-webkit-box-shadow:inset 0 1px 2px #DDD, 0 1px 0 #FFF;
				-moz-box-shadow:inset 0 1px 2px #DDD, 0 1px 0 #FFF;
				border:1px solid #CCC;
				background:#FFF;
				margin:0 0 5px;
				padding:10px;
				border-radius:5px;
			}
			#contact-form input[type="text"]:hover,
			#contact-form input[type="email"]:hover,
			#contact-form input[type="tel"]:hover,
			#contact-form input[type="url"]:hover,
			#contact-form textarea:hover {
				-webkit-transition:border-color 0.3s ease-in-out;
				-moz-transition:border-color 0.3s ease-in-out;
				transition:border-color 0.3s ease-in-out;
				border:1px solid #AAA;
			}
			#contact-form textarea {
				height:100px;
				max-width:100%;
			}
			#contact-form button[type="submit"] {
				cursor:pointer;
				width:100%;
				border:none;
				background:#693e5a;
				background-image:linear-gradient(bottom, #2d70de 10%, #4d90fe 50%);
				background-image:-moz-linear-gradient(bottom, #2d70de 10%, #4d90fe 50%);
				background-image:-webkit-linear-gradient(bottom, #2d70de 10%, #4d90fe 50%);
				color:#FFF;
				margin:0 0 5px;
				padding:10px;
				border-radius:5px;
			}
			#contact-form button[type="submit"]:hover {
				background-image:linear-gradient(bottom, #0d50be 0%, #4d90fe 52%);
				background-image:-moz-linear-gradient(bottom, #0d50be 0%, #4d90fe 52%);
				background-image:-webkit-linear-gradient(bottom, #0d50be 0%, #4d90fe 52%);
				-webkit-transition:background 0.3s ease-in-out;
				-moz-transition:background 0.3s ease-in-out;
				transition:background-color 0.3s ease-in-out;
			}
			#contact-form button[type="submit"]:active {
				box-shadow:inset 0 1px 3px rgba(0,0,0,0.5);
			}
			#contact-form input:focus,
			#contact-form textarea:focus {
				outline:0;
				border:1px solid #999;
			}
			::-webkit-input-placeholder {
			    color:#888;
			}
			:-moz-placeholder {
			    color:#888;
			}
			::-moz-placeholder {
			    color:#888;
			}
			:-ms-input-placeholder {
			    color:#888;
			}
			
			.drag {
		        width: 70px;
		        height: 70px;
		        line-height: 70px;
		        cursor: pointer;
		        border-radius: 10px;
		        float: left;
		        margin-left: 5px;
		        text-align: center;
		        font-size: 12px;
		    }
		    
		    #dragbasic {
		    	position:absolute;
		    	top:200px;
		    	left:260px;
		        width: 500px;
		        height: 500px;
		        border: 1px solid gray;
		        background-color: #E0F0FF;
		    }


			input {
			    border: 0;
			    outline: 0;
			    background: yellow
			        ;
			    border-bottom: 2px solid black;
			    width: 80px;
			    height:80px;
			    font-size:180%;
			}

			.block {
				position: absolute;
				display: block;
				text-align: left;
				left:40px;
			}


			#webgl_div {
				position:fixed;
				top:0px;
				left:0px;
				width:120px;
				height:600px;
			}



			#blackOpaqueBackground {
				position:absolute;
				width:90%;
				height:90%;
				opacity:0.7;
				border:4px;
				background: url() no-repeat #CCCCCC center; 
				border-style:solid;
				border-color:#000000 #000000;
				-webkit-border-radius: 2px;
				-moz-border-radius: 2px;
				border-radius: 2px;
				z-index: 1;
			}


			#topbar {
				position:absolute;
				top:30px;
				left:110px;
				width:200px;
				height:40px;
			}

			#home_content {
				position:absolute;
				top:80px;
				left:20px;
				width:84%;
				margin-left:140px;
				background: url() no-repeat #FFFFFF center; 
				overflow-y: scroll;
				height:84%;
				z-index: 200;				
			}

			#business_solutions_content {
				position:absolute;
				top:80px;
				left:20px;
				width:84%;
				margin-left:140px;
				background: url() no-repeat #FFFFFF center; 
				overflow-y: scroll;
				height:84%;
				z-index: 200;				
			}

			#dipole_content {
				position:absolute;
				top:80px;
				left:20px;
				width:84%;
				margin-left:140px;
				background: url() no-repeat #FFFFFF center; 
				overflow-y: scroll;
				height:84%;
				z-index: 200;				
			}

			#blog_content {
				position:absolute;
				top:80px;
				left:20px;
				width:84%;
				margin-left:140px;
				background: url() no-repeat #FFFFFF center; 
				overflow-y: scroll;
				height:84%;
				z-index: 200;	
			}

			#content {
				position:absolute;
				top:80px;
				left:20px;
				width:84%;
				margin-left:140px;
				background: url() no-repeat #FFFFFF center; 
				overflow-y: scroll;
				height:84%;
				z-index: 200;
			}

			#molecules_viewer {
				position:absolute;
				background-color: #F1F1F1;
				left:0px;
				margin-left:100px;
				min-width:800px;
				width:80%;
				height:80%;
			}


		</style>

		<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="css/print.css" type="text/css" media="print" />

		<!--MOBILE SPECIFIC STYLESHEET-->
		<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
		<link media="only screen and (max-device-width: 480px)" href="css/mobile.css" type= "text/css" rel="stylesheet" />



	</head>
	<body>

		<div id="wrapper">


			<div id="white_background">
			</div>

			<!--HEADER FOR MOBILES ONLY-->
			<header id="mobile">
			<h1><a href="./" title="Return to homepage">Mobile</a></h1>
			</header><!--end mobile-->

			<div id="webgl_div">
			</div>


			<div class="support">
			  <p id="recog-support">Your browser doesn't support <a href="https://dvcs.w3.org/hg/speech-api/raw-file/tip/speechapi.html#speechreco-section"><code>window.SpeechRecognition</code></a> from the Web Speech API.</p>
			  <p id="synth-support">Your browser doesn't support <a href="https://dvcs.w3.org/hg/speech-api/raw-file/tip/speechapi.html#tts-section"><code>window.speechSynthesis</code></a> from the Web Speech API.</p>
			</div>
			
			<output></output>
			
			<!--MAIN NAVIGATION BAR-->
			<nav id="topbar">
			<ul>
			
			<li><a href="javascript:showHomePage(this);" title="Home">OrbitusBiomedical</a></li>
			<li><a href="javascript:showBusinessSolutionsPage(this);" title="Biomedical Business Solutions for your company">Business Solutions</a></li>
			<li><a href="javascript:showDipolePage(this);" title="Molecuar Visualization Tool" >∂ipole</a></li>
			<li><a href="javascript:showBlogPage(this);" title="Biomedical news and events page">Blog</a></li>
			<li><a href="javascript:showContactPage(this);" title="Send us your ideas, comments, or requests for project development">Contact</a></li>

			</ul>
			</nav><!--topbar-->
			<!--END MAIN NAVIGATION-->

			<div id="info">	
				<a href="./" target="">
				<img src="textures/sprites/OrbitusRobotics_logo_black.png" alt="OrbitusBiomedical" height="100" width="100"></img></a>
			</div>



			<div id="business_solutions_content" z-index:100>

				<article>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<h1> Let our experts carry your project into reality! </h1>
					<h3> Biomedical software is our business!</h3>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
				</article>

				<hr>

				<article class="left">
				<a href="http://www.medsmart.com" target="_blank"><h1>MedSmart</h1></a>
				<a href="javascript:console.log('MedSmart WEbpage Goes Here');" target="_blank"title="MedSmart.com"><img src="img/MedSmart.png" width="400" height="400" alt="MedSmart is a family medical data tracking app for iOS"></a>
				<a href="https://itunes.apple.com/us/app/medsmart/id509857833?mt=8" target="_blank"title="MedSmart on iTunes App Store"><img src="img/App_Store_Badge.png" width="135px" height="40px"></a>
				
				</article><!--end left-->
				<article class="right">
				<h3>Track your family's medical information!</h3>
				<p>Use your iOS device to securely store and transmit your family's medical data, with secure Faxing capabilities you can send you data anywhere at the touch of a button.
				<br></br>
				<img src="img/MedSmart_screenshot_3.png" width="180" height="280" alt="Track all your medical data from surgeries to vitamins">
				<img src="img/MedSmart_screenshot_1.png" width="180" height="280" alt="Track all your medical data from surgeries to vitamins">
				
				</article><!--end right-->

				<article class="left">
				<h3>Store the whole family!</h3>
				<p>Make sure you keep the family's emergency information on hand, instantly bring up and message vital medical information to anyone at the puch of a button!</p>
				<img src="img/MedSmart_screenshot_0.png" width="720" height="400" alt="MedSmart is a family medical data tracking app for iOS">
				</article><!--end left-->
				<article class="right">
				<h3>Generates a PDF of your data</h3>
				<p>Send you medical data by fax or email with a PDF copy of your medical records.</p>
				<img src="img/MedSmart_screenshot_4.png" width="720" height="400" alt="Track all your medical data from surgeries to vitamins">
				</article><!--end right-->


				</section><!--end intro-->

				<hr>
				<article class="left">
				<a href="http://www.diabetesofficevisit.com" target="_blank"><h1>DiabetesOfficeVisit</h1></a>
				<a href="http://www.diabetesofficevisit.com" target="_blank">
				<img src="img/DiabetesOfficeVisit.png" width="400" height="400" alt="MedSmart is a family medical data tracking app for iOS">
				</a>
				<a href="https://itunes.apple.com/us/app/diabetes-office-visit/id374081701?mt=8" target="_blank"title="DOV on iTunes App Store"><img src="img/App_Store_Badge.png" width="135px" height="40px"></a>
				</article><!--end left-->
				
				<article class="right">
				<h3>An E-Book and a Diabetes Management App in One</h3>
				
				<p>The Diabetes Office Visit app marries both an eBook and a diabetes management tool, 
							with the ultimate goal of helping diabetic patients set targets with their doctor 
							and then use the app to actively monitor how close daily habits are to hitting those targets.</p>
						  <a href="http://www.diabetesofficevisit.com" target="_blank">www.diabetesofficevisit.com</a>
						 
				
				</article><!--end left-->

				<article class="left">
				<h3>Quickly enter glucose readings!</h3>
				<p>DiabetesOfficeVisit graphs your diabetic data so your doctor can quckly make decisions about your medications dosages</p>
				<img src="img/dov_screenshot_2.png" width="720" height="400" alt="Track all your medical data from surgeries to vitamins">
				</article><!--end right-->
				<article class="right">
					<img src="img/dov_screenshot_1.png" width="720" height="400" alt="MedSmart is a family medical data tracking app for iOS">
				</article>

				</section><!--end intro-->

				<hr>

				<section class="columns"><!--more content in columns, this time several narrow ones-->
				<br></br>
				<br></br>
				<div style="text-align: center;">
				<img src="textures/sprites/OrbitusRobotics_logo_black.png" alt="OrbitusBiomedical" height="200" width="200"></img>
				</div>
				<br></br>
				<h6>ORBITUS BIOMEDICAL</h6>
				<br></br>
				<br></br>				
				</section><!--end columns-->

				<br></br>

				<hr>

				<h4> &copy 2014 OrbitusBiomedical</h4>
			</div><!--end content-->


			<div id="dipole_content" z-index:100>

				<br></br>
				<br></br>
				<br></br>
				<section id="∂ipole"><!--give a brief introduction of your site-->
				<h1><a href="./dipole" target="_blank"><img src="img/__EPaint.png" style="width=200px; height=200px;">∂ipole</a> - Visualize Chemicals in 3D</h1>
				<h3>Right from your WebGL enabled browser</h3>

				<iframe width="768" height="576" src="//www.youtube.com/embed?v=H_Fm91e6U_Y?autoplay=1&amp;loop=1&amp;playlist=H_Fm91e6U_Y" frameborder="0" allowfullscreen=""></iframe>

				<br></br>
				<br></br>
				<br></br>
				<br></br>

				<hr>

				<br></br>
				<h3>Just type "caffeine" in the search field below!</h3>
				<iframe src="./dipole?alpha=Caffeine&rotate=true" id="molecules_viewer"></iframe>

				<br></br>
				<br></br>
				<br></br>
				<br></br>
				<br></br>
				<br></br>
				<br></br>
				<br></br>
				<br></br>
				<br></br>
				<br></br>
				<br></br>
				<br></br>																				
				</section><!--end intro-->

				<section id="imagebg"><a href="./dipole?alpha=Nitrobenzene&beta=trinitrotoluene&gamma=octanitrocubane&delta=nitroglycerin" target="_blank"><img src="img/dipole_screenshot_1.png" width="50%" height="65%" alt="A list of Molecules" style="">
				</a>

				<article class="right">
					<h2>Molecular Precision</h3>
					<h3><p>∂ipole search's against NCBI's PubChem database to bring you the most accurate 3D molecular visualizations. Share your chemical playground with the world and help improve biomolecular education. On your left you can clearly see 4 very combustable molecules, see how easy it is to compare molecules with ∂ipole!</p>
					
				</article><!--end left-->
				<p>Nitrobenzene, Trinitrotoluene, Octanitrocubane, and nitroglycerin are pictured.
				</section><!--end imagebg-->

				<article class="left">
				<h3>Compare different molecules!</h3>
				<p>Open up to 4 different molecules to compare side by side as they are rendered with picometer precision. We see beta carotene underneath along side vitamin-A and retin-A. It is instantly clear how the molecule is processed into a smaller carbon chain vitamin molecule.</p>
				<a href="./dipole?alpha=beta%20carotene&gamma=vitamin%20A&delta=retin%20A" target="_blank"><img src="img/dipole_screenshot_2.png" width="720" height="400" alt="A list of Molecules">
				</a>
				</article><!--end left-->
				<article class="right">
				<h3>Embed ∂ipole in your webpage!</h3>
				<p>Easily show 3D molecules into your website with just a simple iframe command. Only a WebGL enabled browser is required.</p>
				<a href="./molecule_list.html"><img src="img/dipole_molecules_screenshot.png" width="720" height="500" style="background-position: right 100px top;" alt="Vintage Russian Kiev camera">
				</a>
				</article><!--end right-->


				<hr>


				<section class="columns"><!--more content in columns, this time several narrow ones-->
				<br></br>
				<br></br>
				<div style="text-align: center;">
				<img src="textures/sprites/OrbitusRobotics_logo_black.png" alt="OrbitusBiomedical" height="200" width="200"></img>
				</div>
				<br></br>
				<h6>ORBITUS BIOMEDICAL</h6>
				<br></br>
				<br></br>				
				</section><!--end columns-->

				<br></br>

				<hr>

				<h4> &copy 2014 OrbitusBiomedical</h4>
				
			</div>




			<div id="blog_content" z-index:100>
				<article>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<h1> Biomedical Tech Blog</h1>
					<h3> News and excitement in the biomedical community!</h3>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
				</article>

				<hr>

				<h4> &copy 2014 OrbitusBiomedical</h4>


			</div>


			<div id="home_content" z-index:100>
				<article>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<h1> Biomedical App Solutions For Your Business</h1>
					<h3> Delivering desktop, mobile and web technologies to the biomedical community</h3>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
				</article>

				<hr>

					<h4> &copy 2014 OrbitusBiomedical</h4>


			</div>


			<div id="ContactPage" title="Contact" class="fade-out">
				<div id="ContactWrapper2" class="wrapper">
					<div id="main" >

					<form id="contact-form" onSubmit="return submitBugReport()">
						<h2>Contact us!</h2>
						<h6>How can we help you build your next project?</h6>
						<div>
							<label>
								<span>Name: (required)</span>
								<input placeholder="Please enter your name" id="nameField" type="text" tabindex="1" required autofocus>
							</label>
						</div>
						<div>
							<label>
								<span>Email: (required)</span>
								<input placeholder="Please enter a brief description of the bug" id="bugTitle" type="email" tabindex="2" required>
							</label>
						</div>
						<div>
							<label>
								<span>Message: (required)</span>
								<textarea id="messageField" tabindex="5" required>Tell us what you think? </textarea>
							</label>
						</div>
						<div>
							<button name="submit" type="submit" id="contact-submit">Send</button>
						</div>
					</form>

					
					</div>
				</div>
			</div>
			
		</div>
		


		<script src="libraries/three.min.js"></script>

		<script src="js/controls/TrackballControls.js"></script>
		<script src="js/controls/TransformControls.js"></script>

		<script src="js/loaders/PubChem_3DJSONLoader.js"></script>
		<script src="js/loaders/PDBLoader.js"></script>
		
		<script src="js/libs/stats.min.js"></script>
		
		<script src="js/THREEx.KeyboardState.js"></script>
		<script src="js/THREEx.FullScreen.js"></script>
		<script src="js/THREEx.WindowResize.js"></script>
		<script src="js/threex.geometricglowmesh.js"></script>


		<script src="js/jquery-2.1.0.js" ></script>
		<script src="js/jquery.blockUI.js" ></script>
		<script src="js/Detector.js"></script>
		<script src="js/libs/tween.min.js"></script>

		<script type="text/javascript" src="js/bootstrap.js"></script>
		<script type="text/javascript" src="js/bootstrap-tooltip.js"></script>
		<script type="text/javascript" src="js/bootstrap-confirmation.js"></script>		

		<link href="css/jquery-ui.css" rel="stylesheet">
		<script src="js/jquery-ui.js"></script>

		<script src="js/latinize.js"></script>
		<!--<script src="js/computer_speak.js?2014"></script>-->
		

		<script>

			var alphaObjects = [];
			var betaObjects = [];
			var gammaObjects = [];
			var deltaObjects = [];

			var alphaOpacity = 1.0;
			var betaOpacity = 1.0;
			var gammaOpacity = 1.0;
			var deltaOpacity = 1.0;

			var alphaDataResponse;
			var alphaDataTitle;
			var betaDataResponse;
			var betaDataTitle;
			var gammaDataResponse;
			var gammaDataTitle;
			var deltaDataResponse;
			var deltaDataTitle;


			var keyboard = new THREEx.KeyboardState();
			
			var selectedDimension;
			var selectedObjectsArray;
			var universal_material;

			
			$("#content").scroll(function() {
			    var y_scroll_pos = $("#content").scrollTop();
				// set to whatever you want it to be
				console.log('y_scroll_pos - ', y_scroll_pos);

			    if(y_scroll_pos > 150) { // ∂ipole
			    	/*
				   computer_speak("Dipole. We were tasked to create an environment with native browser technologies that would present chemical data to the user. Embed an iframe in your webpage and instantly allow users to have 3D control of a molecule. Our goal is to Enhance and educate. Try typing in the name of any molecule in the search field. Our engine is backed with N C B I's PubChem chemical databank.", function() { console.log("done speaking"); 
				})*/
			    }
				


			});

			if ( ! Detector.webgl ) Detector.addGetWebGLMessage();
			

			$( "#ContactPage" ).draggable();


			var justSpoke = false;
			var out = document.querySelector('output');

			// Toggle browser support messages.
			if (!('speechSynthesis' in window)) {
			  document.querySelector('#synth-support').classList.add('show');
			}

			if (!('SpeechRecognition' in window)) {
			  document.querySelector('#recog-support').classList.add('show');
			}

			if (('speechSynthesis' in window)) {
				/*
				var computer = new Computer(true, out);

				var msg = new SpeechSynthesisUtterance();
				// msg.voiceURI = 'native';
				//   msg.volume = 1; // 0 to 1
				//   var voices = window.speechSynthesis.getVoices();
				//   msg.voice = voices[10];
				//   msg.rate = 1; // 0.1 to 10
				//   msg.pitch = 1; //0 to 2
				msg.text = "Welcome to Orbitus Biomedical!";
				msg.lang = "en";

				msg.onend = function(e) {
					console.log('Finished Speaking');
					setTimeout('computer_speak("World class biomedical software solutions", function() { console.log("done speaking"); })', 300);
					setTimeout('computer_speak("Our biomedical engineers have renowned development expertise to help carry your project into reality!", function() { console.log("done speaking"); })', 1600);
					setTimeout('computer_speak("Dream with us!", function() { console.log("done speaking"); })', 2700);

				};

				speechSynthesis.speak(msg);



				computer.onresult = function(e) {
				  if (e.results.length) {
				    var result = e.results[e.resultIndex];
				    if (result.isFinal) {

				      // Protection from spoken response through speakers creating a cycle.
				      if (justSpoke) {
				        justSpoke = false;
				        return;
				      }

				      console.log('Speech result: ' + result[0].transcript);
				      this.translate(result[0].transcript);
				    }
				  }
				};

				computer.onstart = function(e) {
				  console.log('did start speech recognition');
				  justSpoke = false;
				};

				computer.onend = function(e) {
				  console.log('did end speech recognition');
				  justSpoke = false;
				};	
				*/
			}
			

			function computer_speak(message, onEndFunction)
			{
				var msg = new SpeechSynthesisUtterance();
				// msg.voiceURI = 'native';
				//   msg.volume = 1; // 0 to 1
				//   var voices = window.speechSynthesis.getVoices();
				//   msg.voice = voices[10];
				//   msg.rate = 1; // 0.1 to 10
				//   msg.pitch = 1; //0 to 2
				msg.text = message;
				msg.lang = "en";

				msg.onend = function(e) {
					console.log('Finished Speaking');
					onEndFunction();
				};

				speechSynthesis.speak(msg);
			}

			function detect_mobile_device() { 
			 if( navigator.userAgent.match(/Android/i)
			 || navigator.userAgent.match(/webOS/i)
			 || navigator.userAgent.match(/iPhone/i)
			 || navigator.userAgent.match(/iPad/i)
			 || navigator.userAgent.match(/iPod/i)
			 || navigator.userAgent.match(/BlackBerry/i)
			 || navigator.userAgent.match(/Windows Phone/i)
			 ){
			    return true;
			  }
			 else {
			    return false;
			  }
			}

			function showHomePage (context)
			{
				$('home_content').scrollTop = 0;

				$('#home_content').fadeIn(300);
				$('#business_solutions_content').fadeOut(300);
				$('#dipole_content').fadeOut(300);	
				$('#blog_content').fadeOut(300);
			}
			function showBusinessSolutionsPage (context)
			{
				$('business_solutions_content').scrollTop = 0;

				$('#home_content').fadeOut(300);
				$('#business_solutions_content').fadeIn(300);
				$('#dipole_content').fadeOut(300);
				$('#blog_content').fadeOut(300);
			}
			function showDipolePage (context)
			{
				$('business_solutions_content').scrollTop = 0;
					
				$('#home_content').fadeOut(300);
				$('#business_solutions_content').fadeOut(300);
				$('#dipole_content').fadeIn(300);
				$('#blog_content').fadeOut(300);
			}
			function showBlogPage (context)
			{
				$('business_solutions_content').scrollTop = 0;
					
				$('#home_content').fadeOut(300);
				$('#business_solutions_content').fadeOut(300);
				$('#dipole_content').fadeOut(300);
				$('#blog_content').fadeIn(300);
			}
			function showContactPage (context)
			{
				console.log('dipole page animates in here');
				fade(this);
			}


			function getUrlVars() {
			    var vars = {};
			    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
			        vars[key] = value;
			    });
			    return vars;
			}


			function show(id) {
			    document.getElementById(id).style.visibility = "visible";
			}
			function hide(id) {
			    document.getElementById(id).style.visibility = "hidden";
			}

	        function clearDimension(targetDimensionToClear)
	        {

	        	if (targetDimensionToClear == 'alpha')
	        	{
	        		console.log('alpha clear, ', alphaObjects);
					for ( var i = 0; i < alphaObjects.length; i ++ ) {
						var object = alphaObjects[ i ];
						console.log('alpha clear object - ', alphaObjects);
						object.parent.remove( object );

					}
					alphaObjects = [];
		        	scene.remove( alphaTransformControl );
					alphaDataResponse = "";
					alphaDataTitle = "";
					setCookie("alphaDimension", "", 999);

	        	}
	        	if (targetDimensionToClear == 'beta')
	        	{
	        		console.log('beta clear, ', betaObjects);
					for ( var i = 0; i < betaObjects.length; i ++ ) {

						var object = betaObjects[ i ];
						console.log('beta clear object - ', betaObjects);
						object.parent.remove( object );

					}
					betaObjects = [];
					scene.remove( betaTransformControl );
					betaDataResponse = "";
					setCookie("betaDimension", "", 999);
	        	}
	        	if (targetDimensionToClear == 'gamma')
	        	{
	        		console.log('gamma clear, ', gammaObjects);
					for ( var i = 0; i < gammaObjects.length; i ++ ) {

						var object = gammaObjects[ i ];
						console.log('gamma clear object - ', gammaObjects);
						object.parent.remove( object );

					}
					gammaObjects = [];
					scene.remove( gammaTransformControl );
					gammaDataResponse = "";
					setCookie("gammaDimension", "", 999);
	        	}
	        	if (targetDimensionToClear == 'delta')
	        	{
	        		console.log('delta clear, ', deltaObjects);
					for ( var i = 0; i < deltaObjects.length; i ++ ) {

						var object = deltaObjects[ i ];
						console.log('delta clear object - ', deltaObjects);
						object.parent.remove( object );

					}
					deltaObjects = [];
					scene.remove( deltaTransformControl );
					deltaDataResponse = "";
					setCookie("deltaDimension", "", 999);
	        	}
	        }

			function fade(btnElement) {
	            if (btnElement.value === "Fade Out") {
	                document.getElementById("ContactPage").className = "fade-out";
	                btnElement.value = "Fade In";
	            }
	            else {
	                document.getElementById("ContactPage").className = "fade-in";
	                btnElement.value = "Fade Out";
	            }
	        }

			function toggleSelectedDimension(dimension) {
				scene.remove( alphaTransformControl );
				scene.remove( betaTransformControl );
				scene.remove( gammaTransformControl );
				scene.remove( deltaTransformControl );


				if (dimension == "alpha")
				{
					//console.log('alpha');
					selectedDimension = alphaDimension;
					selectedObjectsArray = alphaObjects;
					scene.add( alphaTransformControl );

					document.getElementById("dimensionMenu_alpha_Button").style.backgroundColor='#4d90fe';
					document.getElementById("dimensionMenu_beta_Button").style.backgroundColor='#4d90fe';
					document.getElementById("dimensionMenu_gamma_Button").style.backgroundColor='#4d90fe';
					document.getElementById("dimensionMenu_delta_Button").style.backgroundColor='#4d90fe';

					document.getElementById("dimensionMenu_alpha_Button").style.backgroundColor='#4d4d4d';

					
				}
				if (dimension == "beta")
				{
					//console.log('beta');
					selectedDimension = betaDimension;
					selectedObjectsArray = betaObjects;
					scene.add( betaTransformControl );

					document.getElementById("dimensionMenu_alpha_Button").style.backgroundColor='#4d90fe';
					document.getElementById("dimensionMenu_beta_Button").style.backgroundColor='#4d90fe';
					document.getElementById("dimensionMenu_gamma_Button").style.backgroundColor='#4d90fe';
					document.getElementById("dimensionMenu_delta_Button").style.backgroundColor='#4d90fe';

					document.getElementById("dimensionMenu_beta_Button").style.backgroundColor='#4d4d4d';
				}
				if (dimension == "gamma")
				{
					//console.log('gamma');
					selectedDimension = gammaDimension;
					selectedObjectsArray = gammaObjects;
					scene.add( gammaTransformControl );

					document.getElementById("dimensionMenu_alpha_Button").style.backgroundColor='#4d90fe';
					document.getElementById("dimensionMenu_beta_Button").style.backgroundColor='#4d90fe';
					document.getElementById("dimensionMenu_gamma_Button").style.backgroundColor='#4d90fe';
					document.getElementById("dimensionMenu_delta_Button").style.backgroundColor='#4d90fe';

					document.getElementById("dimensionMenu_gamma_Button").style.backgroundColor='#4d4d4d';
				}
				if (dimension == "delta")
				{
					//console.log('delta');
					selectedDimension = deltaDimension;
					selectedObjectsArray = deltaObjects;
					scene.add( deltaTransformControl );

					document.getElementById("dimensionMenu_alpha_Button").style.backgroundColor='#4d90fe';
					document.getElementById("dimensionMenu_beta_Button").style.backgroundColor='#4d90fe';
					document.getElementById("dimensionMenu_gamma_Button").style.backgroundColor='#4d90fe';
					document.getElementById("dimensionMenu_delta_Button").style.backgroundColor='#4d90fe';

					document.getElementById("dimensionMenu_delta_Button").style.backgroundColor='#4d4d4d';
				}

				parseDataResponseIntoInfoPanel(selectedDimension);
			}

			var info_dialog;
			function toggleInfoPanel() {

				parseDataResponseIntoInfoPanel(selectedDimension);

			    info_dialog = $( "#ContactWrapper" ).dialog({width:410, position:{my:'right', at:'left', of: $("#infoMenu_info_Button")}, resizable: false});

			}


			function setCookie(cname,cvalue,exdays)
			{
				var d = new Date();
				d.setTime(d.getTime()+(exdays*24*60*60*1000));
				var expires = "expires="+d.toGMTString();
				document.cookie = cname + "=" + cvalue + "; " + expires;
			} 

			function getCookie(cname)
			{
				var name = cname + "=";
				var ca = document.cookie.split(';');

				for(var i=0; i<ca.length; i++)
				{
					var c = ca[i].trim();
					if (c.indexOf(name)==0)
						return c.substring(name.length,c.length);
				}
				return "";
			}


			function pubChem_compoundSearchByName( searchTerm, destinationDimension)
			{
					if (destinationDimension == alphaDimension)
					{
						setCookie("alphaDimension", searchTerm, 999);
						alphaDataTitle = searchTerm;
					}
					if (destinationDimension == betaDimension)
					{
						setCookie("betaDimension", searchTerm, 999);
						betaDataTitle = searchTerm;
					}
					if (destinationDimension == gammaDimension)
					{
						setCookie("gammaDimension", searchTerm, 999);
						gammaDataTitle = searchTerm;
					}
					if (destinationDimension == deltaDimension)
					{
						setCookie("deltaDimension", searchTerm, 999);
						deltaDataTitle = searchTerm;
					}

					var url = "https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/name/" + searchTerm + "/JSON?record_type=3d"; 
					var pubChemSearchHTTPRequest_json = new XMLHttpRequest(); 
					pubChemSearchHTTPRequest_json.open("GET", url, true);

					$.blockUI({
							message: '<h1>Searching...</h1>'
						});
				    
				
					 // subscribe to this event before you send your request.
					pubChemSearchHTTPRequest_json.onreadystatechange=function()
					{
					 	if (pubChemSearchHTTPRequest_json.readyState==4)
					 	{
					 		//console.log('responseText json =', pubChemSearchHTTPRequest_json.responseText);
					   		var jsonResponse = JSON.parse(pubChemSearchHTTPRequest_json.responseText);
							//console.log('searchTerm json results =', jsonResponse);
							$.unblockUI();

							
							if (jsonResponse.Fault)
							{
								var searchErrorMessage = 'Search Error' + "\n" + jsonResponse.Fault.Code + "\n" + jsonResponse.Fault.Message;
								//console.log(searchErrorMessage);
								alert(searchErrorMessage);
							}
							else
							{
								if (jsonResponse)
								{
									//console.log('atoms - ' , jsonResponse.PC_Compounds[0].atoms);
									//console.log('bonds - ' , jsonResponse.PC_Compounds[0].bonds);
									//console.log('coords - ' , jsonResponse.PC_Compounds[0].coords);
									//console.log('cid - ' , jsonResponse.PC_Compounds[0].id.id.cid);
									if (!selectedDimension)
									{
										selectedDimension = alphaDimension;
										scene.add( alphaTransformControl );
										scene.remove( betaTransformControl );
										scene.remove( gammaTransformControl );
										scene.remove( deltaTransformControl );

									}
									console.log('mylog = ', jsonResponse.PC_Compounds[0]);

									loadPubChemMoleculeProperties( jsonResponse.PC_Compounds[0].id.id.cid , destinationDimension);

									loadPubChemMolecule(jsonResponse.PC_Compounds[0], destinationDimension);
								}
							}
							
					  	}

					}
					pubChemSearchHTTPRequest_json.send(null);
			}

			function pubChem_compoundSearch( searchTerm ){

					var url = "http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pccompound&term=" + searchTerm + "&retmode=json&retmax=1000"; 
					var pubChemSearchHTTPRequest_json = new XMLHttpRequest(); 
					pubChemSearchHTTPRequest_json.open("GET", url, true);

					$.blockUI({
							message: '<h1>Searching...</h1>'
						});
				    
				
					 // subscribe to this event before you send your request.
					pubChemSearchHTTPRequest_json.onreadystatechange=function()
					{
					 	if (pubChemSearchHTTPRequest_json.readyState==4)
					 	{
					 		//console.log('responseText json =', pubChemSearchHTTPRequest_json.responseText);
					   		var jsonResponse = JSON.parse(pubChemSearchHTTPRequest_json.responseText);
							//console.log('searchTerm json results =', jsonResponse.esearchresult);
							$.unblockUI();


							if (jsonResponse.esearchresult.errorlist)
							{
								//console.log('search error - ', jsonResponse.esearchresult.errorlist.phrasesnotfound);
							}
							if (jsonResponse.esearchresult.idlist)
							{
								//console.log('search results found - ' + jsonResponse.esearchresult.idlist[0]);	

								//load the first molecule and morph between its conformers....
								pubChem_CID_getName(jsonResponse.esearchresult.idlist[0]);
								
								// CAN"T DO ANYTHING DURING YTHE ASYNC CALL
								//console.log('molecule_IUPAC_Preferred_Name -', molecule_IUPAC_Preferred_Name);
		   						//$("#info").html(molecule_IUPAC_Preferred_Name);

								/*
								for ( var cid in jsonResponse.esearchresult.idlist)
								{
									pubChem_CID_getName(jsonResponse.esearchresult.idlist[cid]);
								}
								*/
							}
							//Sometimes we don't get any synonyms back! nothing to name the molecule!?!?
							return jsonResponse.esearchresult;
					  	}

					}
					pubChemSearchHTTPRequest_json.send(null);
			}




			function pubChem_printJSON( cid )
			{
				//console.log('loading -', cid);
				var url = "https://pubchem.ncbi.nlm.nih.gov/classification/cgi/classifications.fcgi?hid=1&search_uid=2244&search_uid_type=cid&search_type=tree&format=json"; 

				//console.log('url44 -', url);

				var pubSearch_json = new XMLHttpRequest(); 

				pubSearch_json.open("GET", url, true);
				//console.log('async');
				 // subscribe to this event before you send your request.
				pubSearch_json.onreadystatechange=function()
				{
				 	if (pubSearch_json.readyState==4)
				 	{

				 		//console.log('responseText json =', pubSearch_json.responseText);
				 		/*
				   		var jsonResponse = JSON.parse(pubSearch_json.responseText);
				   		if (jsonResponse.PC_Compounds)
				   		{
				   			console.log('cid json =', jsonResponse.PC_Compounds[0].props); //0 because we only sent off 1 cid request...asyncronously btw	
				   			for (var propIndex in jsonResponse.PC_Compounds[0].props)
				   			{
				   				var propertyObject = jsonResponse.PC_Compounds[0].props[propIndex];
				   				
				   				if (propertyObject.urn.label == 'IUPAC Name')
				   				{
				   					if (propertyObject.urn.name == 'Preferred')
				   					{
				   						console.log('property Object = ' + propertyObject.value.sval);		
				   						//$("#info").html(propertyObject.value.sval);
				   						return propertyObject.value.sval;
				   					}
				   				}
				   			}
				   		}*/
					}
				}
			}



			function pubChem_load_molecule( cid )
			{
				//console.log('loading -', cid);
				var url = "https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/" + cid + "/JSON"; 

				var pubSearch_json = new XMLHttpRequest(); 

				pubSearch_json.open("GET", url, true);

				 // subscribe to this event before you send your request.
				pubSearch_json.onreadystatechange=function()
				{
				 	if (pubSearch_json.readyState==4)
				 	{

				 		//console.log('responseText json =', pubSearch_json.responseText);
				 		/*
				   		var jsonResponse = JSON.parse(pubSearch_json.responseText);
				   		if (jsonResponse.PC_Compounds)
				   		{
				   			console.log('cid json =', jsonResponse.PC_Compounds[0].props); //0 because we only sent off 1 cid request...asyncronously btw	
				   			for (var propIndex in jsonResponse.PC_Compounds[0].props)
				   			{
				   				var propertyObject = jsonResponse.PC_Compounds[0].props[propIndex];
				   				
				   				if (propertyObject.urn.label == 'IUPAC Name')
				   				{
				   					if (propertyObject.urn.name == 'Preferred')
				   					{
				   						console.log('property Object = ' + propertyObject.value.sval);		
				   						//$("#info").html(propertyObject.value.sval);
				   						return propertyObject.value.sval;
				   					}
				   				}
				   			}
				   		}*/
					}
				}
			}



			function pubChem_CID_getName( cid ){

					var url = "https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/" + cid + "/JSON"; 
					var pubChemSearchHTTPRequest_json = new XMLHttpRequest(); 
					pubChemSearchHTTPRequest_json.open("GET", url, true);

					 // subscribe to this event before you send your request.
					pubChemSearchHTTPRequest_json.onreadystatechange=function()
					{
					 	if (pubChemSearchHTTPRequest_json.readyState==4)
					 	{
					 		//console.log('responseText json =', pubChemSearchHTTPRequest_json.responseText);
					   		var jsonResponse = JSON.parse(pubChemSearchHTTPRequest_json.responseText);
					   		if (jsonResponse.PC_Compounds)
					   		{
					   			//console.log('props =', jsonResponse.PC_Compounds[0].props); //0 because we only sent off 1 cid request...asyncronously btw	
					   			for (var propIndex in jsonResponse.PC_Compounds[0].props)
					   			{
					   				var propertyObject = jsonResponse.PC_Compounds[0].props[propIndex];
					   				
					   				if (propertyObject.urn.label == 'IUPAC Name')
					   				{
					   					
					   					if (propertyObject.urn.name == 'Preferred')
					   					{
					   						//console.log('property Object = ' + propertyObject.value.sval);		
					   						$("#info").html(propertyObject.value.sval);
					   						return propertyObject.value.sval;
					   					}
					   				}
					   			}
					   		}
							//Sometimes we don't get any synonyms back! nothing to name the molecule!?!?
							//return jsonResponse;
					  	}
					}
					pubChemSearchHTTPRequest_json.send(null);
			}

			function pubChem_SID_getName( sid ){

					var url = "https://pubchem.ncbi.nlm.nih.gov/rest/pug/substance/sid/" + sid + "/JSON"; 
					var pubChemSearchHTTPRequest_json = new XMLHttpRequest(); 
					pubChemSearchHTTPRequest_json.open("GET", url, true);

					 // subscribe to this event before you send your request.
					pubChemSearchHTTPRequest_json.onreadystatechange=function()
					{
					 	if (pubChemSearchHTTPRequest_json.readyState==4)
					 	{
					 		//console.log('responseText json =', pubChemSearchHTTPRequest_json.responseText);
					   		var jsonResponse = JSON.parse(pubChemSearchHTTPRequest_json.responseText);
							console.log('sid json =', jsonResponse.PC_Substances[0].synonyms);

							//Sometimes we don't get any synonyms back! nothing to name the molecule!?!?
							return jsonResponse.PC_Substances[0].synonyms;
					  	}
					}
					pubChemSearchHTTPRequest_json.send(null);
			}
			
			function submitBugReport() {

				var name = $("#nameField").val();
				var email = $("#emailField").val();
				var message = $("#messageField").val();

				window.open("mailto:" + "orbitus@orbitusrobotics.com" + "?subject=" + name + " &body=" + message);
				document.getElementById("ContactPage").className = "fade-out";

				return false;
			}

			function checkField(){
				
				if($("#field").val() == "")
				{
					alert('Search Field is Empty, Search for molecules on PubChem by PuchChem index, name, or any other keyword you might use on PubChem!');
					return false;
				}

				str = $("#field").val();
				//document.all.helpiframe.src="smm3.jsp?searchStr=" + str;
				//showHide('passwordLayer','visible');

				return false;

			}

			function process_pubChem_compoundSearch()
			{
				console.log("begin pubChem compound Search - " + $("#field").val());
				pubChem_compoundSearchByName($("#field").val(), selectedDimension);
			}


			function colorify( ctx, width, height, color, a ) {

				var r = color.r;
				var g = color.g;
				var b = color.b;

				var imageData = ctx.getImageData( 0, 0, width, height );
				var data = imageData.data;

				for ( var y = 0; y < height; y ++ ) {

					for ( var x = 0; x < width; x ++ ) {

						var index = ( y * width + x ) * 4;

						data[ index ]     *= r;
						data[ index + 1 ] *= g;
						data[ index + 2 ] *= b;
						data[ index + 3 ] *= a;

					}

				}

				ctx.putImageData( imageData, 0, 0 );

			}

			
			function imageToCanvas( image ) {

				var width = image.width;
				var height = image.height;

				var canvas = document.createElement( 'canvas' );

				canvas.width = width;
				canvas.height = height;

				var context = canvas.getContext( '2d' );
				context.drawImage( image, 0, 0, width, height );

				return canvas;

			}

			function setAtomSize( atom, element)
			{
				//console.log('atom size -', atom.width, atom.height);
				//console.log('element -', element);
				switch(element)
				{
					case 'c':
					//console.log('carbon');
					atom.width = 73;//picometers
					atom.height = 73;//picometers
					break;
					case 'o':
					//console.log('oxygen');
					atom.width = 66;//picometers
					atom.height = 66;//picometers
					break;
					case 'n':
					//console.log('nitrogen');
					atom.width = 71;//picometers
					atom.height = 71;//picometers
					break;
					case 'h':
					//console.log('hydrogen');
					atom.width = 31;//picometers
					atom.height = 31;//picometers
					break;
				}
			}

			function getAtomSize(element)
			{
				//console.log('element -', element);
				switch(element)
				{
					case 'c':
					//console.log('carbon');
					return 73/2.0;//picometers
					break;
					case 'o':
					//console.log('oxygen');
					return 66/2.0;//picometers
					break;
					case 'n':
					//console.log('nitrogen');
					return 71/2.0;//picometers
					break;
					case 'h':
					//console.log('hydrogen');
					return 31/2.0;//picometers
					break;
				}
			}



			function loadPubChemMoleculeProperties( cid , destinationDimension)
			{

				//console.log('pubChem_3djson ', + cid);
				

				document.getElementById('MoleculeCID').innerHTML = cid;


				var url = "https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/" + cid + "/JSON"; 
				var pubChemSearchHTTPRequest_json = new XMLHttpRequest(); 
				pubChemSearchHTTPRequest_json.open("GET", url, true);

				 // subscribe to this event before you send your request.
				pubChemSearchHTTPRequest_json.onreadystatechange=function()
				{
				 	if (pubChemSearchHTTPRequest_json.readyState==4)
				 	{
				 		//console.log('responseText json =', pubChemSearchHTTPRequest_json.responseText);
				   		var jsonResponse = JSON.parse(pubChemSearchHTTPRequest_json.responseText);
				   		
				   		if (destinationDimension == alphaDimension)
				   		{
				   			alphaDataResponse = jsonResponse;
				   		}
				   		if (destinationDimension == betaDimension)
				   		{
				   			betaDataResponse = jsonResponse;
				   		}
				   		if (destinationDimension == gammaDimension)
				   		{
				   			gammaDataResponse = jsonResponse;
				   		}
				   		if (destinationDimension == deltaDimension)
				   		{
				   			deltaDataResponse = jsonResponse;
				   		}


				   		parseDataResponseIntoInfoPanel(selectedDimension);
						
				  	}
				}
				pubChemSearchHTTPRequest_json.send(null);
			}

			function parseDataResponseIntoInfoPanel(selectedDimension)
			{
				var jsonResponse;
				if (selectedDimension == alphaDimension)
				{
					jsonResponse = alphaDataResponse;
					document.getElementById('MoleculeName').innerHTML = alphaDataTitle;
				}
				if (selectedDimension == betaDimension)
				{
					jsonResponse = betaDataResponse;
					document.getElementById('MoleculeName').innerHTML = betaDataTitle;
				}
				if (selectedDimension == gammaDimension)
				{
					jsonResponse = gammaDataResponse;
					document.getElementById('MoleculeName').innerHTML = gammaDataTitle;
				}
				if (selectedDimension == deltaDimension)
				{
					jsonResponse = deltaDataResponse;
					document.getElementById('MoleculeName').innerHTML = deltaDataTitle;
				}


				if (jsonResponse)
				{
			   		if (jsonResponse.PC_Compounds)
			   		{
			   			//console.log('props =', jsonResponse.PC_Compounds[0].props); //0 because we only sent off 1 cid request...asyncronously btw	
			   			for (var propIndex in jsonResponse.PC_Compounds[0].props)
			   			{
			   				var propertyObject = jsonResponse.PC_Compounds[0].props[propIndex];
			   				

			   				
			   				if (propertyObject.urn.label == 'Count')
			   				{	
			   					if (propertyObject.urn.name == 'Rotatable Bond')
			   					{
			   						//console.log('property Object = ' + propertyObject.value.ival);		
									document.getElementById('RotatableBond').innerHTML = propertyObject.value.ival;
			   					}
								if (propertyObject.urn.name == 'Hydrogen Bond Acceptor')
			   					{
			   						//console.log('property Object = ' + propertyObject.value.ival);		
									document.getElementById('HydrogenBondAcceptor').innerHTML = propertyObject.value.ival;
			   					}
			   					if (propertyObject.urn.name == 'Hydrogen Bond Donor')
			   					{
			   						//console.log('property Object = ' + propertyObject.value.ival);		
									document.getElementById('HydrogenBondDonor').innerHTML = propertyObject.value.ival;
			   					}
			   					
			   					
			   				}

			   				if (propertyObject.urn.label == 'Molecular Weight')
			   				{	
		   						//console.log('property Object = ' + propertyObject.value.fval);		
								document.getElementById('MolecularWeight').innerHTML = propertyObject.value.fval;
			   				}
			   				if (propertyObject.urn.label == 'Molecular Formula')
			   				{	
		   						//console.log('property Object = ' + propertyObject.value.sval);		
								document.getElementById('MoleculeFormula').innerHTML = propertyObject.value.sval;
			   				}
			   				if (propertyObject.urn.label == 'IUPAC Name')
			   				{	
			   					if (propertyObject.urn.name == 'Preferred')
			   					{
			   						//console.log('MoleculeName = ' + propertyObject.value.sval);
									document.getElementById('IUPAC_PreferredName').innerHTML = propertyObject.value.sval;
			   					}
			   				}
			   			}
			   		}
				}
			}

			function loadRCSB_PDBFile( url , destinationDimension)
			{
				//var url = "molecules/bdna.pdb";


				//------------
				// Clear out old objects from the DOM
				if (!destinationDimension)
				{
					console.log('Need destinationDimension... defaulting to alpha');
				}
				else
				{
					console.log("Loading molecule into destinationDimension - ", destinationDimension);	
					selectedDimension = destinationDimension;
				}
					

				//clearSelectedDimensionObjects();

				//------------


				loader.load( url, function ( geometry, geometryBonds ) {

					var offset = THREE.GeometryUtils.center( geometry );
					geometryBonds.applyMatrix( new THREE.Matrix4().makeTranslation( offset.x, offset.y, offset.z ) );


					for ( var i = 0; i < geometry.vertices.length; i ++ ) {

						var position = geometry.vertices[ i ];
						var color = geometry.colors[ i ];

						var element = geometry.elements[ i ];
						var atomSize = getAtomSize(element);

						var texture = THREE.ImageUtils.loadTexture( 'textures/sprites/ball.png' );
  	 					var material = new THREE.SpriteMaterial( { color:color.getHex(), map: texture} );
    

   						var sprite = new THREE.Sprite( material );

  	 					sprite.position.x = position.x;
  	 					sprite.position.y = position.y;
  	 					sprite.position.z = position.z;
  	 					sprite.opacity = 0.12;
  	 					
  	 					//console.log('atomSize = ', atomSize);


  	 					if (atomSize)
  	 						sprite.scale.set( atomSize, atomSize, 1 );
  	 					else
  	 						sprite.scale.set( 50, 50, 1 );

						sprite.position.multiplyScalar( 100 );



						selectedDimension.add( sprite );

						if (selectedDimension == alphaDimension)	
							alphaObjects.push( sprite );
						if (selectedDimension == betaDimension)
							betaObjects.push( sprite );						
						if (selectedDimension == gammaDimension)	
							gammaObjects.push( sprite );
						if (selectedDimension == deltaDimension)
							deltaObjects.push( sprite );

					}
					/*
					for ( var i = 0; i < geometryBonds.vertices.length; i += 2 ) {

						var start = geometryBonds.vertices[ i ];
						var end = geometryBonds.vertices[ i + 1 ];

						start.multiplyScalar( 100 );
						end.multiplyScalar( 100 );

						tmpVec1.subVectors( end, start );
						var bondLength = tmpVec1.length();


						var axis = tmpVec2.set( 0, 1, 0 ).cross( tmpVec1 );
						var radians = Math.acos( tmpVec3.set( 0, 1, 0 ).dot( tmpVec4.copy( tmpVec1 ).normalize() ) );

						var objMatrix = new THREE.Matrix4().makeRotationAxis( axis.normalize(), radians );
							

						
						var bond = document.createElement( 'div' );
						bond.className = "bond";
						bond.style.height = bondLength + "px";

						var bond2 = document.createElement( 'div' );
						bond2.className = "bond";
						bond2.style.height = bondLength + "px";

						var joint = new THREE.Object3D( bond );
						joint.position.copy( start );
						joint.position.lerp( end, 0.5 );

						joint.matrix.copy( objMatrix );
						joint.rotation.setFromRotationMatrix( joint.matrix, joint.rotation.order );

						joint.matrixAutoUpdate = false;
						joint.updateMatrix();


						var joint2 = new THREE.Object3D( bond2 );
						joint2.position.copy( start );
						joint2.position.lerp( end, 0.5 );

						joint2.matrix.copy( objMatrix );
						joint2.rotation.setFromRotationMatrix( joint2.matrix, joint2.rotation.order );

						joint2.matrixAutoUpdate = false;
						joint2.updateMatrix();



						var geometry = new THREE.CylinderGeometry( 4, 4, bondLength, 4, 1 );
						var material =  new THREE.MeshLambertMaterial( { color:0xffffff, shading: THREE.FlatShading, transparent: true } );
						var mesh = new THREE.Mesh( geometry, material );
		

						mesh.rotation.y = Math.PI/2;

						mesh.matrixAutoUpdate = false;
						mesh.updateMatrix();

						mesh.userData.bondLengthShort = bondLength + "px";
						mesh.userData.bondLengthFull = ( bondLength + 55 ) + "px";

						mesh.userData.joint = joint;

						joint.add( mesh );
						selectedDimension.add( joint );


						if (selectedDimension == alphaDimension)	
							alphaObjects.push( mesh );
						if (selectedDimension == betaDimension)
							betaObjects.push( mesh );						
						if (selectedDimension == gammaDimension)	
							gammaObjects.push( mesh );
						if (selectedDimension == deltaDimension)
							deltaObjects.push( mesh );

						var geometry = new THREE.CylinderGeometry( 4, 4, bondLength, 4, 1 );
						var material =  new THREE.MeshLambertMaterial( { color:0xffffff, shading: THREE.FlatShading, transparent: true } );
						var mesh2 = new THREE.Mesh( geometry, material );

						
						mesh2.matrixAutoUpdate = false;
						mesh2.updateMatrix();

						mesh2.userData.bondLengthShort = bondLength + "px";
						mesh2.userData.bondLengthFull = ( bondLength + 55 ) + "px";

						mesh2.userData.joint = joint;

						joint2.add( mesh2 );
						selectedDimension.add( joint2 );


						if (selectedDimension == alphaDimension)	
							alphaObjects.push( mesh2 );
						if (selectedDimension == betaDimension)
							betaObjects.push( mesh2 );						
						if (selectedDimension == gammaDimension)	
							gammaObjects.push( mesh2 );
						if (selectedDimension == deltaDimension)
							deltaObjects.push( mesh2 );
						break;
					}
					*/
						

					render();
					if (loadThird)
					{
						loadThird = false;
						loadRCSB_PDBFile("molecules/bdna.pdb" , gammaDimension);	
					}
					if (loadSecond)
					{
						loadSecond = false;
						loadThird = true;
						loadRCSB_PDBFile("molecules/bdna.pdb" , betaDimension);	
					}


					

				});
			}

			function clearSelectedDimensionObjects()
			{

				//Clear the objects array
				if (selectedDimension == alphaDimension)
				{
					console.log('alpha clear, ', alphaObjects);
					for ( var i = 0; i < alphaObjects.length; i ++ ) {

						var object = alphaObjects[ i ];
						console.log('alpha clear object - ', alphaObjects);
						object.parent.remove( object );

					}
					alphaObjects = [];
					scene.add( alphaTransformControl );
				}
				if (selectedDimension == betaDimension)
				{
					console.log('beta clear');
					for ( var i = 0; i < betaObjects.length; i ++ ) {

						var object = betaObjects[ i ];
						object.parent.remove( object );

					}
					betaObjects = [];
					scene.add( betaTransformControl );
				}
				if (selectedDimension == gammaDimension)
				{
					console.log('gamma clear');
					for ( var i = 0; i < gammaObjects.length; i ++ ) {

						var object = gammaObjects[ i ];
						object.parent.remove( object );

					}
					gammaObjects = [];
					scene.add( gammaTransformControl );
				}
				if (selectedDimension == deltaDimension)
				{
					console.log('delta clear');
					for ( var i = 0; i < deltaObjects.length; i ++ ) {

						var object = deltaObjects[ i ];
						object.parent.remove( object );

					}
					deltaObjects = [];
					scene.add( deltaTransformControl );
				}
			}


			function loadPubChemMolecule( pubChem_3djson , destinationDimension)
			{



				//------------
				// Clear out old objects from the DOM
				if (!destinationDimension)
				{
					console.log('Need destinationDimension... defaulting to alpha');
				}
				else
				{
					console.log("Loading molecule into destinationDimension - ", destinationDimension);	
					selectedDimension = destinationDimension;
				}
					

				clearSelectedDimensionObjects();

				//------------

				loader.pubChem_load( pubChem_3djson, function ( geometry, geometryBonds, order ) {
					


					var offset = THREE.GeometryUtils.center( geometry );
					geometryBonds.applyMatrix( new THREE.Matrix4().makeTranslation( offset.x, offset.y, offset.z ) );

					for ( var i = 0; i < geometry.vertices.length; i ++ ) {

						var position = geometry.vertices[ i ];
						var color = geometry.colors[ i ];
						//console.log('geometry -', geometry);
						//console.log('geometryBonds -', geometryBonds);
						//console.log('geometryColor -', color);

						var element = geometry.elements[ i ];
						
						//WebGL way of adding a sprite atom
						
						var geometry2 = new THREE.SphereGeometry( getAtomSize(element), 32, 32 );

						var material =  new THREE.MeshLambertMaterial( { color:color.getHex(), shading: THREE.FlatShading , transparent: true} );
						//var material = new THREE.MeshBasicMaterial( {color: color.getHex()} );
						var sphere = new THREE.Mesh( geometry2, material );
						material.opacity = 0.7;
						sphere.position.copy( position );
						sphere.position.multiplyScalar( 100 );
						

						selectedDimension.add( sphere );

						if (selectedDimension == alphaDimension)	
							alphaObjects.push( sphere );
						if (selectedDimension == betaDimension)
							betaObjects.push( sphere );						
						if (selectedDimension == gammaDimension)	
							gammaObjects.push( sphere );
						if (selectedDimension == deltaDimension)
							deltaObjects.push( sphere );

						//console.log('round1');
					}

					for ( var i = 0; i < geometryBonds.vertices.length; i += 2 ) {

						var start = geometryBonds.vertices[ i ];
						var end = geometryBonds.vertices[ i + 1 ];

						start.multiplyScalar( 100 );
						end.multiplyScalar( 100 );

						tmpVec1.subVectors( end, start );
						var bondLength = tmpVec1.length();


						var axis = tmpVec2.set( 0, 1, 0 ).cross( tmpVec1 );
						var radians = Math.acos( tmpVec3.set( 0, 1, 0 ).dot( tmpVec4.copy( tmpVec1 ).normalize() ) );

						var objMatrix = new THREE.Matrix4().makeRotationAxis( axis.normalize(), radians );
							

						//console.log('geometryBonds = ', geometryBonds);
						//console.log('order = ', order[i]);
						//console.log('i =', i/2);


						switch (order[i/2])
						{
							case 'single':
							{
								// One Bond
								//console.log('single bond rudy');
								var bond = document.createElement( 'div' );
								bond.className = "bond";
								bond.style.height = bondLength + "px";

								var bond2 = document.createElement( 'div' );
								bond2.className = "bond";
								bond2.style.height = bondLength + "px";

								var joint = new THREE.Object3D( bond );
								joint.position.copy( start );
								joint.position.lerp( end, 0.5 );

								joint.matrix.copy( objMatrix );
								joint.rotation.setFromRotationMatrix( joint.matrix, joint.rotation.order );

								joint.matrixAutoUpdate = false;
								joint.updateMatrix();


								var joint2 = new THREE.Object3D( bond2 );
								joint2.position.copy( start );
								joint2.position.lerp( end, 0.5 );

								joint2.matrix.copy( objMatrix );
								joint2.rotation.setFromRotationMatrix( joint2.matrix, joint2.rotation.order );

								joint2.matrixAutoUpdate = false;
								joint2.updateMatrix();



								var geometry = new THREE.CylinderGeometry( 4, 4, bondLength, 4, 1 );
								var material =  new THREE.MeshLambertMaterial( { color:0xffffff, shading: THREE.FlatShading, transparent: true } );
								var mesh = new THREE.Mesh( geometry, material );
				

								//var object = new THREE.CSS3DObject( bond );
								mesh.rotation.y = Math.PI/2;

								mesh.matrixAutoUpdate = false;
								mesh.updateMatrix();

								mesh.userData.bondLengthShort = bondLength + "px";
								mesh.userData.bondLengthFull = ( bondLength + 55 ) + "px";

								mesh.userData.joint = joint;

								joint.add( mesh );
								selectedDimension.add( joint );


								if (selectedDimension == alphaDimension)	
									alphaObjects.push( mesh );
								if (selectedDimension == betaDimension)
									betaObjects.push( mesh );						
								if (selectedDimension == gammaDimension)	
									gammaObjects.push( mesh );
								if (selectedDimension == deltaDimension)
									deltaObjects.push( mesh );

								var geometry = new THREE.CylinderGeometry( 4, 4, bondLength, 4, 1 );
								var material =  new THREE.MeshLambertMaterial( { color:0xffffff, shading: THREE.FlatShading, transparent: true } );
								var mesh2 = new THREE.Mesh( geometry, material );

								//var object2 = new THREE.CSS3DObject( bond2 );
								//object2.rotation.y = Math.PI/2;
								mesh2.matrixAutoUpdate = false;
								mesh2.updateMatrix();

								mesh2.userData.bondLengthShort = bondLength + "px";
								mesh2.userData.bondLengthFull = ( bondLength + 55 ) + "px";

								mesh2.userData.joint = joint;

								joint2.add( mesh2 );
								selectedDimension.add( joint2 );


								if (selectedDimension == alphaDimension)	
									alphaObjects.push( mesh2 );
								if (selectedDimension == betaDimension)
									betaObjects.push( mesh2 );						
								if (selectedDimension == gammaDimension)	
									gammaObjects.push( mesh2 );
								if (selectedDimension == deltaDimension)
									deltaObjects.push( mesh2 );
								break;
							}
							case 'double':
							{
								// One Bond

								//console.log('double bond rudy');
								var bond = document.createElement( 'div' );
								bond.className = "bond";
								bond.style.height = bondLength + "px";

								var bond2 = document.createElement( 'div' );
								bond2.className = "bond";
								bond2.style.height = bondLength + "px";

								var joint = new THREE.Object3D( bond );
								joint.position.copy( start );
								joint.position.lerp( end, 0.5 );

								joint.matrix.copy( objMatrix );
								joint.rotation.setFromRotationMatrix( joint.matrix, joint.rotation.order );

								joint.matrixAutoUpdate = false;
								joint.updateMatrix();


								var joint2 = new THREE.Object3D( bond2 );
								joint2.position.copy( start );
								joint2.position.lerp( end, 0.5 );

								joint2.matrix.copy( objMatrix );
								joint2.rotation.setFromRotationMatrix( joint2.matrix, joint2.rotation.order );

								joint2.matrixAutoUpdate = false;
								joint2.updateMatrix();


								var geometry = new THREE.CylinderGeometry( 4, 4, bondLength, 4, 1 );
								var material =  new THREE.MeshLambertMaterial( { color:0xffffff, shading: THREE.FlatShading, transparent: true } );
								var object2 = new THREE.Mesh( geometry, material );								//object2.rotation.y = Math.PI/2;
								object2.position.x -= 10;
								object2.matrixAutoUpdate = false;
								object2.updateMatrix();

								object2.userData.bondLengthShort = bondLength + "px";
								object2.userData.bondLengthFull = ( bondLength + 55 ) + "px";

								object2.userData.joint = joint;

								joint2.add( object2 );
								selectedDimension.add( joint2 );

								if (selectedDimension == alphaDimension)	
									alphaObjects.push( object2 );
								if (selectedDimension == betaDimension)
									betaObjects.push( object2 );						
								if (selectedDimension == gammaDimension)	
									gammaObjects.push( object2 );
								if (selectedDimension == deltaDimension)
									deltaObjects.push( object2 );



								// Another Bond

								var bond = document.createElement( 'div' );
								bond.className = "bond";
								bond.style.height = bondLength + "px";

								var bond2 = document.createElement( 'div' );
								bond2.className = "bond";
								bond2.style.height = bondLength + "px";

								var joint = new THREE.Object3D( bond );
								joint.position.copy( start );
								joint.position.lerp( end, 0.5 );

								joint.matrix.copy( objMatrix );
								joint.rotation.setFromRotationMatrix( joint.matrix, joint.rotation.order );

								joint.matrixAutoUpdate = false;
								joint.updateMatrix();


								var joint2 = new THREE.Object3D( bond2 );
								joint2.position.copy( start );
								joint2.position.lerp( end, 0.5 );

								joint2.matrix.copy( objMatrix );
								joint2.rotation.setFromRotationMatrix( joint2.matrix, joint2.rotation.order );

								joint2.matrixAutoUpdate = false;
								joint2.updateMatrix();


								var geometry = new THREE.CylinderGeometry( 4, 4, bondLength, 4, 1 );
								var material =  new THREE.MeshLambertMaterial( { color:0xffffff, shading: THREE.FlatShading, transparent: true } );
								var object2 = new THREE.Mesh( geometry, material );								//object2.rotation.y = Math.PI/2;
								//object2.rotation.y = Math.PI/2;
								object2.position.x += 10;
								object2.matrixAutoUpdate = false;
								object2.updateMatrix();

								object2.userData.bondLengthShort = bondLength + "px";
								object2.userData.bondLengthFull = ( bondLength + 55 ) + "px";

								object2.userData.joint = joint;

								joint2.add( object2 );
								selectedDimension.add( joint2 );


								if (selectedDimension == alphaDimension)	
									alphaObjects.push( object2 );
								if (selectedDimension == betaDimension)
									betaObjects.push( object2 );						
								if (selectedDimension == gammaDimension)	
									gammaObjects.push( object2 );
								if (selectedDimension == deltaDimension)
									deltaObjects.push( object2 );
							}
							break;
							case 'triple':
							{
								// One Bond
								//console.log('triple bond rudy');
								var bond = document.createElement( 'div' );
								bond.className = "bond";
								bond.style.height = bondLength + "px";

								var bond2 = document.createElement( 'div' );
								bond2.className = "bond";
								bond2.style.height = bondLength + "px";

								var joint = new THREE.Object3D( bond );
								joint.position.copy( start );
								joint.position.lerp( end, 0.5 );

								joint.matrix.copy( objMatrix );
								joint.rotation.setFromRotationMatrix( joint.matrix, joint.rotation.order );

								joint.matrixAutoUpdate = false;
								joint.updateMatrix();


								var joint2 = new THREE.Object3D( bond2 );
								joint2.position.copy( start );
								joint2.position.lerp( end, 0.5 );

								joint2.matrix.copy( objMatrix );
								joint2.rotation.setFromRotationMatrix( joint2.matrix, joint2.rotation.order );

								joint2.matrixAutoUpdate = false;
								joint2.updateMatrix();

								var geometry = new THREE.CylinderGeometry( 4, 4, bondLength, 4, 1 );
								var material =  new THREE.MeshLambertMaterial( { color:0xffffff, shading: THREE.FlatShading, transparent: true } );
								var object2 = new THREE.Mesh( geometry, material );


								//object2.rotation.y = Math.PI/2;
								object2.matrixAutoUpdate = false;
								object2.updateMatrix();

								object2.userData.bondLengthShort = bondLength + "px";
								object2.userData.bondLengthFull = ( bondLength + 55 ) + "px";

								object2.userData.joint = joint;

								joint2.add( object2 );
								selectedDimension.add( joint2 );
								if (selectedDimension == alphaDimension)	
									alphaObjects.push( object2 );
								if (selectedDimension == betaDimension)
									betaObjects.push( object2 );						
								if (selectedDimension == gammaDimension)	
									gammaObjects.push( object2 );
								if (selectedDimension == deltaDimension)
									deltaObjects.push( object2 );



								// One Bond

								var bond = document.createElement( 'div' );
								bond.className = "bond";
								bond.style.height = bondLength + "px";

								var bond2 = document.createElement( 'div' );
								bond2.className = "bond";
								bond2.style.height = bondLength + "px";

								var joint = new THREE.Object3D( bond );
								joint.position.copy( start );
								joint.position.lerp( end, 0.5 );

								joint.matrix.copy( objMatrix );
								joint.rotation.setFromRotationMatrix( joint.matrix, joint.rotation.order );

								joint.matrixAutoUpdate = false;
								joint.updateMatrix();


								var joint2 = new THREE.Object3D( bond2 );
								joint2.position.copy( start );
								joint2.position.lerp( end, 0.5 );

								joint2.matrix.copy( objMatrix );
								joint2.rotation.setFromRotationMatrix( joint2.matrix, joint2.rotation.order );

								joint2.matrixAutoUpdate = false;
								joint2.updateMatrix();



								var geometry = new THREE.CylinderGeometry( 4, 4, bondLength, 4, 1 );
								var material =  new THREE.MeshLambertMaterial( { color:0xffffff, shading: THREE.FlatShading, transparent: true } );
								var object2 = new THREE.Mesh( geometry, material );								//object2.rotation.y = Math.PI/2;
								object2.position.x -= 20;
								object2.matrixAutoUpdate = false;
								object2.updateMatrix();

								object2.userData.bondLengthShort = bondLength + "px";
								object2.userData.bondLengthFull = ( bondLength + 55 ) + "px";

								object2.userData.joint = joint;

								joint2.add( object2 );
								selectedDimension.add( joint2 );

								if (selectedDimension == alphaDimension)	
									alphaObjects.push( object2 );
								if (selectedDimension == betaDimension)
									betaObjects.push( object2 );						
								if (selectedDimension == gammaDimension)	
									gammaObjects.push( object2 );
								if (selectedDimension == deltaDimension)
									deltaObjects.push( object2 );





								// Another Bond

								var bond = document.createElement( 'div' );
								bond.className = "bond";
								bond.style.height = bondLength + "px";

								var bond2 = document.createElement( 'div' );
								bond2.className = "bond";
								bond2.style.height = bondLength + "px";

								var joint = new THREE.Object3D( bond );
								joint.position.copy( start );
								joint.position.lerp( end, 0.5 );

								joint.matrix.copy( objMatrix );
								joint.rotation.setFromRotationMatrix( joint.matrix, joint.rotation.order );

								joint.matrixAutoUpdate = false;
								joint.updateMatrix();


								var joint2 = new THREE.Object3D( bond2 );
								joint2.position.copy( start );
								joint2.position.lerp( end, 0.5 );

								joint2.matrix.copy( objMatrix );
								joint2.rotation.setFromRotationMatrix( joint2.matrix, joint2.rotation.order );

								joint2.matrixAutoUpdate = false;
								joint2.updateMatrix();


								var geometry = new THREE.CylinderGeometry( 4, 4, bondLength, 4, 1 );
								var material =  new THREE.MeshLambertMaterial( { color:0xffffff, shading: THREE.FlatShading, transparent: true } );
								var object2 = new THREE.Mesh( geometry, material );
								object2.position.x += 20;
								object2.matrixAutoUpdate = false;
								object2.updateMatrix();

								object2.userData.bondLengthShort = bondLength + "px";
								object2.userData.bondLengthFull = ( bondLength + 55 ) + "px";

								object2.userData.joint = joint;

								joint2.add( object2 );
								selectedDimension.add( joint2 );

								if (selectedDimension == alphaDimension)	
									alphaObjects.push( object2 );
								if (selectedDimension == betaDimension)
									betaObjects.push( object2 );						
								if (selectedDimension == gammaDimension)	
									gammaObjects.push( object2 );
								if (selectedDimension == deltaDimension)
									deltaObjects.push( object2 );
							}
						}
						

					}

					render();

				} );

			}



			$(document).ready(function() {  
			    
				//----
				//pubChem_printJSON(2244); //Test that you can print from the server.... unit tests #1
				//----

				$('#searchContainer').focus();


				$('#pubChemSearchForm').submit(function () {
				 //console.log('userDidEnter in pubChemSearchForm');
				 process_pubChem_compoundSearch();
				 return false;
				});

			    $('#submitButton').click(function() {
					//console.log('submit clicked - ' + $("#field").val());
					process_pubChem_compoundSearch();
				});

				$('#field').submit(function () {
					//sendContactForm();
					//console.log('Submit without refreshing');
					return false;
				});

			    // if text input field value is not empty show the "X" button
				$("#field").keyup(function() {
					//console.log('search field keyup - ' + $("#field").val());
					$("#x").fadeIn();
					if ($.trim($("#field").val()) == "") {
						$("#x").fadeOut();
					}

				});
					// on click of "X", delete input field value and hide "X"
				$("#x").click(function() {
					//console.log('X clicked');
					$("#field").val("");
					$(this).hide();
				});


			});  

			var alphaDimension;
			var betaDimension;
			var gammaDimension;
			var deltaDimension;

			var container, stats;
			var camera, scene, renderer, particles, geometry, materials = [], parameters, i, h, color, sprite, size;
			var mouseX = 0, mouseY = 0;
			
			var alphaTransformControl;
			var betaTransformControl;
			var gammaTransformControl;
			var deltaTransformControl;

			var objects = [];
			var tmpVec1 = new THREE.Vector3();
			var tmpVec2 = new THREE.Vector3();
			var tmpVec3 = new THREE.Vector3();
			var tmpVec4 = new THREE.Vector3();


			var loader = new THREE.PubChem_3DJSONLoader();
			var pdbLoader = new THREE.PDBLoader();

			var colorSpriteMap = {};
			var baseSprite = document.createElement( 'img' );

			var animationTimer;

			var windowHalfX = window.innerWidth / 2;
			var windowHalfY = window.innerHeight / 2;

			var loadSecond = true;
			var loadThird = false;

			

			init();
			animate();
			//closeFileWindows(0);
			
			$('#blog_content').fadeOut(0);
			$('#home_content').fadeIn(1200);
			$('#business_solutions_content').fadeOut(0);
			$('#dipole_content').fadeOut(0);	
			
			
			function expand_horizontal(element) {
				
				var target = document.getElementById(element);
				var offsetHeight = target.style.width;
				var scrollHeight = 30;
				animationTimer = setTimeout('expand(\''+element+'\')',8);

				console.log(scrollHeight);
				if (offsetHeight < scrollHeight)
				{
					offsetHeight += 1;
				}
				else
				{
					clearTimeout(animationTimer);
				}
				
				target.style.width = offsetHeight+"px";

			}

			function expand_vertical(element) {
				
				var target = document.getElementById(element);
				var offsetHeight = target.offsetHeight;
				var scrollHeight = target.scrollHeight;
				animationTimer = setTimeout('expand(\''+element+'\')',8);

				console.log(scrollHeight);
				if (offsetHeight < scrollHeight)
				{
					offsetHeight += 1;
				}
				else
				{
					clearTimeout(animationTimer);
				}
				
				target.style.height = offsetHeight+"px";

			}

			function expand(element) {
				
				var target = document.getElementById(element);
				var offsetHeight = target.offsetHeight;
				var scrollHeight = target.scrollHeight;
				animationTimer = setTimeout('expand(\''+element+'\')',8);

				console.log(scrollHeight);
				if (offsetHeight < scrollHeight)
				{
					offsetHeight += 1;
				}
				else
				{
					clearTimeout(animationTimer);
				}
				
				target.style.height = offsetHeight+"px";

			}

			function retract_horizontal(element) {
				var target = document.getElementById(element);
				var offsetHeight = target.offsetHeight;
				animationTimer = setTimeout('retract(\''+element+'\')',8);
				
				if(offsetHeight > 0){
					offsetHeight -= 1;
				}
				if (offsetHeight < 1)
				{
					offsetHeight = 0;
					clearTimeout(animationTimer);
				}
				target.style.height = offsetHeight+"px";
			}

			function retract(element) {
				var target = document.getElementById(element);
				var offsetHeight = target.offsetHeight;
				animationTimer = setTimeout('retract(\''+element+'\')',8);
				
				if(offsetHeight > 0){
					offsetHeight -= 1;
				}
				if (offsetHeight < 1)
				{
					offsetHeight = 0;
					clearTimeout(animationTimer);
				}
				target.style.height = offsetHeight+"px";
			}


			function init() {

				container = document.getElementById('webgl_div');

				//camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 2000 );
				//camera.position.z = 1000;
				camera = new THREE.PerspectiveCamera( 60, 120 / 900, 1, 100000 );
				camera.position.z = 1500;




				scene = new THREE.Scene();
				var color = new THREE.Color();
				color.setRGB( 1, 1, 1 );
				scene.backgroundColor = color;
				

				scene.fog = new THREE.FogExp2( 0x000000, 0.00003 );
				
				var maxX = 660;
				var maxY = 400;


				var alphaMolecule = getUrlVars()["alpha"];
				var betaMolecule = getUrlVars()["beta"];
				var gammaMolecule = getUrlVars()["gamma"];
				var deltaMolecule = getUrlVars()["delta"];

				var drawAlpha = false, drawBeta = false, drawGamma = false, drawDelta = false;

				if ( typeof alphaMolecule !== 'undefined' && alphaMolecule != 'undefined' )
					drawAlpha = true;
				if ( typeof betaMolecule !== 'undefined' && betaMolecule != 'undefined' )
					drawBeta = true;
				if ( typeof gammaMolecule !== 'undefined' && gammaMolecule != 'undefined' )
					drawGamma = true;
				if ( typeof deltaMolecule !== 'undefined' && deltaMolecule != 'undefined' )
					drawDelta = true;


				alphaDimension = new THREE.Object3D();
				scene.add( alphaDimension );

				betaDimension = new THREE.Object3D();
				scene.add( betaDimension );

				gammaDimension = new THREE.Object3D();
				scene.add( gammaDimension );

				deltaDimension = new THREE.Object3D();
				scene.add( deltaDimension );


				selectedDimension = alphaDimension;
				selectedObjectsArray = alphaObjects;

				
				if (detect_mobile_device())
					console.log('mobile version');
				else
					loadRCSB_PDBFile("molecules/bdna.pdb" , alphaDimension);

				// lights

				light = new THREE.DirectionalLight( 0xffffff );
				light.position.set( 1, 1, 1 );
				scene.add( light );

				light = new THREE.DirectionalLight( 0xffffff );
				light.position.set( -1, -1, -1 );
				scene.add( light );

				light = new THREE.AmbientLight( 0x444444 );
				scene.add( light );

				light = new THREE.AmbientLight( 0x444444 );
				light.position.set( 0, 100, 0 );
				scene.add( light );

				

				renderer = new THREE.WebGLRenderer( { clearAlpha: 1 } );
				renderer.setSize( 120, 900 );
				renderer.setClearColorHex( 0xFFFFFF, 1 );

				renderer.domElement.id = "webgl_renderer_dom_element";
				container.appendChild( renderer.domElement );

				// EVENTS
				THREEx.WindowResize(renderer, camera);
				THREEx.FullScreen.bindKey({ charCode : '`'.charCodeAt(0) });
				
				
				window.addEventListener( 'keydown', function ( event ) {
	            //console.log(event.keyCode);

	            switch ( event.keyCode ) {
	              case 49: //1
	              	
	              	break;
	              case 50: //2
		            
	              	break;
	              case 51: //3
		            
		            break;
	              case 52: //4
	              	
		            break;
	              case 82: //R
    				
    				break;

	            }
    		});
				
				

				
				// Stats for OpenGL
				/*
				stats = new Stats();
				stats.domElement.style.position = 'absolute';
				stats.domElement.style.top = '0px';
				container.appendChild( stats.domElement );
				*/
				/*
				document.addEventListener( 'mousemove', onDocumentMouseMove, false );
				document.addEventListener( 'touchstart', onDocumentTouchStart, false );
				document.addEventListener( 'touchmove', onDocumentTouchMove, false );
				*/
				//

				window.addEventListener( 'resize', onWindowResize, false );

			}

			function onWindowResize() {

				windowHalfX = window.innerWidth / 2;
				windowHalfY = window.innerHeight / 2;


				//document.getElementById("webgl_renderer_dom_element").style.width = 100;
				//document.getElementById("webgl_renderer_dom_element").style.width = 200;
				camera.aspect = 120 / 900;
				camera.updateProjectionMatrix();

				//controls.handleResize();
				renderer.setSize( 120, 900 );
				//renderer.setSize( window.innerWidth, window.innerHeight );

			}

			function onDocumentMouseMove( event ) {

				mouseX = event.clientX - windowHalfX;
				mouseY = event.clientY - windowHalfY;

			}

			function onDocumentTouchStart( event ) {

				if ( event.touches.length === 1 ) {

					event.preventDefault();

					mouseX = event.touches[ 0 ].pageX - windowHalfX;
					mouseY = event.touches[ 0 ].pageY - windowHalfY;

				}

			}

			function onDocumentTouchMove( event ) {

				if ( event.touches.length === 1 ) {

					event.preventDefault();

					mouseX = event.touches[ 0 ].pageX - windowHalfX;
					mouseY = event.touches[ 0 ].pageY - windowHalfY;

				}

			}

			//

			function animate() {

				requestAnimationFrame( animate );

				//controls.update();

				render();
				//stats.update();

			}

			function render() {

				var time = Date.now() * 0.00005;

				//camera.position.x += ( mouseX - camera.position.x ) * 0.05;
				//camera.position.y += ( - mouseY - camera.position.y ) * 0.05;

				//camera.lookAt( scene.position );
				alphaDimension.rotation.x = 3.141596/2.0;
 				alphaDimension.rotation.z = time * -5.7;
 				alphaDimension.position.x = 0;
 				alphaDimension.position.z = -12000;
				alphaDimension.position.y = 4000;

				betaDimension.rotation.x = 3.141596/2.0;
 				betaDimension.rotation.z = time * -5.7 + 3.141596/6.0;
 				betaDimension.position.x = 0;
 				betaDimension.position.z = -12000;
 				betaDimension.position.y = -000;

				gammaDimension.rotation.x = 3.141596/2.0;
 				gammaDimension.rotation.z = time * -5.7 + 3.141596*2/6.0;
 				gammaDimension.position.x = 0;
 				gammaDimension.position.z = -12000;
 				gammaDimension.position.y = -4000;


				//alphaTransformControl.update();
				//betaTransformControl.update();
				//gammaTransformControl.update();
				//deltaTransformControl.update();
				
				renderer.render( scene, camera );

			}


		</script>
	</body>
</html>
